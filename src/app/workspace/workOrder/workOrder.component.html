<form nz-form class="search-header ant-advanced-search-form">
  <!-- 查询标题 -->
  <div nz-form-item nz-row>
      <div nz-col [nzSm]="24" [nzXs]="24" class="context-title">
          <label>查询</label>
      </div>
  </div>

  <!-- 查询内容 -->
  <div class="search-context">
    <div nz-row [nzGutter]="40">
        <div nz-col [nzSpan]="6">
          <div nz-form-item nz-row>
            <div nz-form-label nz-col [nzSpan]="5">
              <label>任务单类型</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="19">
              <nz-select [(ngModel)]="taskType" name='taskType' (nzOpenChange)='changeOption($event)'>
                  <nz-option 
                  *ngFor="let item of taskTypeList" 
                  [nzLabel]="item.label"
                  [nzValue]="item.value"
                  ></nz-option>
              </nz-select>
            </div>
          </div>
        </div>

        <div nz-col [nzSpan]="6">
          <div nz-form-item nz-row>
            <div nz-form-label nz-col [nzSpan]="5">
              <label>搜索范围</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="9">
              <nz-datepicker [nzDisabled]="isDisabled" name='startTime' [(ngModel)]="startTime"  [nzShowTime]="true" [nzPlaceHolder]="'开始时间'" [nzFormat]="'YYYY-MM-DD HH:mm:ss'"></nz-datepicker>
            </div>
            <div nz-form-control nz-col [nzSpan]="1"></div>
            <div nz-form-control nz-col [nzSpan]="9">
              <nz-datepicker [nzDisabled]="isDisabled"  name='finishTime' [(ngModel)]="finishTime" [nzShowTime]="true" [nzPlaceHolder]="'结束时间'" [nzFormat]="'YYYY-MM-DD HH:mm:ss'"></nz-datepicker>
            </div>
          </div>
        </div>

        <div nz-col [nzSpan]="6">
          <div nz-form-item nz-row>
            <div nz-form-label nz-col [nzSpan]="5">
              <label>状态</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="19">
                <nz-select name="taskStatus" [(ngModel)]="taskStatus" [nzDisabled]="isDisabled">
                    <nz-option [nzLabel]="'请选择'" [nzValue]="''"></nz-option>  
                    <nz-option 
                    *ngFor="let item of taskStateList" 
                    [nzLabel]="item.label"
                    [nzValue]="item.value"
                    ></nz-option>
                </nz-select>
            </div>
          </div>
        </div>

        <div nz-col [nzSpan]="6">
          <div nz-form-item nz-row>
            <div nz-form-label nz-col [nzSpan]="5">
              <label>产品</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="19">
                <nz-select name="productId" [(ngModel)]="productId" [nzDisabled]="isDisabled">
                    <nz-option [nzLabel]="'请选择'" [nzValue]="''"></nz-option>  
                    <nz-option 
                    *ngFor="let item of productList" 
                    [nzLabel]="item.name"
                    [nzValue]="item.id"
                    ></nz-option>
                </nz-select>
            </div>
          </div>
        </div>

        <!-- 分割 -->
        <div nz-col [nzSpan]="6">
          <div nz-form-item nz-row>
            <div nz-form-label nz-col [nzSpan]="5">
              <label>项目</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="19">
                <nz-select name="projectId" [(ngModel)]="projectId" [nzDisabled]="isDisabled">
                    <nz-option [nzLabel]="'请选择'" [nzValue]="''"></nz-option>  
                    <nz-option 
                    *ngFor="let item of projectList" 
                    [nzLabel]="item.name"
                    [nzValue]="item.id"
                    ></nz-option>
                </nz-select>
            </div>
          </div>
        </div>

        <div nz-col [nzSpan]="6">
          <div nz-form-item nz-row>
            <div nz-form-label nz-col [nzSpan]="5">
              <label>版本</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="19">
                <nz-select name="versionId" [(ngModel)]="versionId" [nzDisabled]="isDisabled">
                    <nz-option [nzLabel]="'请选择'" [nzValue]="''"></nz-option>  
                    <nz-option 
                    *ngFor="let item of versionList" 
                    [nzLabel]="item.name"
                    [nzValue]="item.id"
                    ></nz-option>
                </nz-select>
            </div>
          </div>
        </div>

        <div nz-col [nzSpan]="6">
          <div nz-form-item nz-row>
            <div nz-form-label nz-col [nzSpan]="5">
              <label>类型</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="19">
                <nz-select name="type" [(ngModel)]="type" [nzDisabled]="isDisabled">
                    <nz-option [nzLabel]="'请选择'" [nzValue]="''"></nz-option>  
                    <nz-option 
                    *ngFor="let item of typeList" 
                    [nzLabel]="item.label"
                    [nzValue]="item.value"
                    ></nz-option>
                </nz-select>
            </div>
          </div>
        </div>

        <div nz-col [nzSpan]="6">
          <div nz-form-item nz-row>
            <div nz-form-label nz-col [nzSpan]="5">
              <label>所有岗位</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="19">
              <nz-cascader [nzDisabled]="isDisabled" name='taskUserId' [(ngModel)]='taskUserId'
                [class.class123]="true"
                [nzOptions]="_options"
              >
              </nz-cascader>
            </div>
          </div>
        </div>

    </div>
  </div>

  <!-- 查询按钮 -->
  <div nz-row>
    <div nz-col [nzSpan]="24" style="text-align: right; padding:10px 20px">
      <button nz-button [nzType]="'primary'" [nzLoading]="isSearch" (click)="searchTask()">
        <i class="anticon anticon-search"></i>
        <span>查询</span>
      </button>
    </div>
  </div>

</form>
  
<div class="search-result-list">
    <div nz-form-item nz-row>
        <div nz-col [nzSm]="24" [nzXs]="24" class="context-title">
            <label>任务单列表</label>
        </div>
    </div>
    <div class="table">
      <nz-table #nzTable [nzDataSource]="data" [nzPageSize]="10">
          <thead nz-thead>
            <tr>
              <!-- <th nz-th [nzWidth]="'25%'"><span>name</span></th>
              <th nz-th [nzWidth]="'15%'"><span>age</span></th>
              <th nz-th [nzWidth]="'40%'"><span>address</span></th> -->
              <th nz-th><span>标题</span></th>
              <th nz-th><span>描述</span></th>
              <th nz-th><span>类型</span></th>
              <th nz-th><span>当前状态</span></th>
              <th nz-th><span>工作量</span></th>
              <th nz-th><span>联调时间</span></th>
              <th nz-th><span>提测时间</span></th>
              <th nz-th><span>测试完成时间</span></th>
              <th nz-th><span>验收完成时间</span></th>
              <th nz-th><span>创建用户</span></th>
              <th nz-th><span>创建日期</span></th>
              <th nz-th><span>编辑</span></th>
            </tr>
          </thead>
          <tbody nz-tbody>
            <tr nz-tbody-tr *ngFor="let data of nzTable.data">
              <td nz-td>
                <span *ngIf="editRow!==data.key">{{data.name}}</span>
              </td>
              <td nz-td>
                <span *ngIf="editRow!==data.key">{{data.age}}</span>
              </td>
              <td nz-td>{{data.address}}</td>
              <td nz-td>
                <span *ngIf="editRow!==data.key">
                  <a (click)="edit(data)">Edit</a>
                </span>
              </td>
            </tr>
        </tbody>
      </nz-table>
    </div>
    
</div>